#!/usr/bin/env php
<?php
/**
 * @copyright Â©2018 Quicken Loans Inc. All rights reserved. Trade Secret,
 *    Confidential and Proprietary. Any dissemination outside of Quicken Loans
 *    is strictly prohibited.
 */

namespace Hal\Core;

use Symfony\Component\Dotenv\Dotenv;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;

$root = realpath(__DIR__ . '/../');
require_once "${root}/vendor/autoload.php";

// Set Timezone to UTC
ini_set('date.timezone', 'UTC');
date_default_timezone_set('UTC');
error_reporting(E_ALL | E_STRICT);

$dotenv = new Dotenv();
$dotenv->load("${root}/config/.env");

$container = new ContainerBuilder;
$builder = new YamlFileLoader($container, new FileLocator($root));
$builder->load('config/hal-core-seed.yaml');

$container->compile(true);

if (!$container) {
    echo "Boom goes the dynamite.\n";
    exit(1);
};

$container->get('application')->run();
